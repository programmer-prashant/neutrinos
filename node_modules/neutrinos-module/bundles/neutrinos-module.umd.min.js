!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@angular/forms"),require("@angular/platform-browser/animations"),require("@angular/flex-layout"),require("neutrinos-seed-services"),require("@angular/material/icon"),require("@angular/material/dialog"),require("@angular/material/button"),require("@angular/material/button-toggle"),require("signature_pad")):"function"==typeof define&&define.amd?define("neutrinos-module",["exports","@angular/core","@angular/common","@angular/common/http","@angular/forms","@angular/platform-browser/animations","@angular/flex-layout","neutrinos-seed-services","@angular/material/icon","@angular/material/dialog","@angular/material/button","@angular/material/button-toggle","signature_pad"],e):e((t=t||self)["neutrinos-module"]={},t.ng.core,t.ng.common,t.ng.common.http,t.ng.forms,t.ng.platformBrowser.animations,t.ng.flexLayout,t["neutrinos-seed-services"],t.ng.material.icon,t.ng.material.dialog,t.ng.material.button,t.ng.material.buttonToggle,t.signature_pad)}(this,(function(t,e,n,o,i,r,a,c,s,u,l,p,d){"use strict";d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d;function f(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}var h=function(){function t(t){var e=this;this.http=t,this.checkFileExist=function(t,n,o,i){return window.resolveLocalFileSystemURL(t+n,(function(){var r=4;if(n.lastIndexOf("(")>-1){var a=parseInt(n.slice(n.lastIndexOf("(")+1,n.lastIndexOf(")")),10);isNaN(a)?(o+=1,n=(n=n.slice(0,n.lastIndexOf("."))+n.slice(n.lastIndexOf("."))).slice(0,n.lastIndexOf("."))+" ("+o+")"+n.slice(n.lastIndexOf("."))):((o=a+1)>10&&o<100?r+=1:o>100&&(r+=2),n=n.slice(0,n.lastIndexOf(".")-r)+" ("+o+")"+n.slice(n.lastIndexOf(".")))}else o+=1,n=(n=n.slice(0,n.lastIndexOf("."))+n.slice(n.lastIndexOf("."))).slice(0,n.lastIndexOf("."))+" ("+o+")"+n.slice(n.lastIndexOf("."));return e.checkFileExist(t,n,o,i)}),(function(){return i(n)}))},this.systemService=c.NSystemService.getInstance(),this.appProperties=this.systemService.getVal("properties")}return t.prototype.getFileInfo=function(t){var e=this.systemService.getDataModelUrl();return t.metadata?e+=this.appProperties.appName+"_"+t.entityName+'.files?filter={"metadata.key": "'+t.metadata.key+'"}':e+=this.appProperties.appName+"_"+t.entityName+".files/"+t.fileId,this.http.get(e)},t.prototype.getFormData=function(t){return new Promise((function(e,n){window.resolveLocalFileSystemURL(t,(function(t){t.file((function(t){var o=new FileReader;o.onerror=function(t){return n(t)},o.onloadend=function(n){var i=new FormData,r=new Blob([new Uint8Array(o.result)],{type:t.type});return i.append("file",r,t.name),e(i)},o.readAsArrayBuffer(t)}))}),(function(t){return n(t)}))}))},t.prototype.getPicture=function(t){var e=this;return new Promise((function(n,o){document.addEventListener("deviceready",(function(){navigator.camera.getPicture((function(t){e.getFormData(t).then((function(t){return n(t)})).catch((function(t){return o(t)}))}),(function(t){return o(t)}),t)}),!1)}))},t.prototype.scanPicture=function(t){var e=this;return new Promise((function(n,o){document.addEventListener("deviceready",(function(){t.hasOwnProperty("sourceType")&&t.hasOwnProperty("doUpload")?scan.scanDoc(t.sourceType,(function(i){t.doUpload?e.getFormData(i).then((function(t){return n(t)})).catch((function(t){return o(t)})):n(i)}),(function(t){return o(t)})):o("sourceType not found")}),!1)}))},t.prototype.getBarcode=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){cordova.plugins.barcodeScanner.scan((function(t){return t.cancelled?n(t):e(t)}),(function(t){return n(t)}),t)}),!1)}))},t.prototype.getVideo=function(t){var e=this;return new Promise((function(t,n){document.addEventListener("deviceready",(function(){navigator.device.capture.captureVideo((function(o){var i=o[0].fullPath;e.getFormData(i).then((function(e){return t(e)})).catch((function(t){return n(t)}))}),(function(t){return n(t)}),{})}),!1)}))},t.prototype.getTts=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("text")?TTS.speak(t).then((function(){return e("success")}),(function(t){return n(t)})):n("text not found")}),!1)}))},t.prototype.getShake=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("start")&&t.hasOwnProperty("sensitivity")?t.start?shake.startWatch((function(){return e("success")}),t.sensitivity,(function(){return n("error")})):shake.stopWatch():n("start or sensitivity not found")}),!1)}))},t.prototype.getOcr=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("uriOrBase")&&t.hasOwnProperty("returnType")?navigator.camera.getPicture((function(o){textocr.recText(t.uriOrBase,t.returnType,o,(function(t){return e(t)}),(function(t){return n(t)}))}),(function(t){return n(t)}),t):n("uriOrBase or returnType not found")}),!1)}))},t.prototype.getFingerprint=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("clientId")&&t.hasOwnProperty("clientSecret")?Fingerprint.isAvailable((function(o){Fingerprint.show(t,(function(){return e("success")}),(function(t){return n(t)}))}),(function(t){return n(t)})):n("clientId or clientSecret not found")}),!1)}))},t.prototype.upload=function(t){var e=this;return new Promise((function(n,o){var i=new FormData;t.formData?i=t.formData:t.files?i.append("file",t.files):o("No file selected!"),t.metadata&&i.append("metadata",JSON.stringify(t.metadata));var r=e.systemService.getFileIOUrl()+""+t.entityName,a={headers:e.setHeaders({"Content-Type":"no-content"})};e.http.post(r,i,a).subscribe((function(t){return n(t)}),(function(t){return o(t)}))}))},t.prototype.download=function(t){var e=this;return new Promise((function(n,o){if(!t.entityName||!t.metadata&&!t.fileId)return o("download options not found");e.getFileInfo(t).subscribe((function(n){n=t.metadata?n[n.length-1]:n.result;var i={contentType:"",filename:""};if(n&&n.contentType&&n.filename){i.contentType=n.contentType,i.filename=n.filename;var r=e.systemService.getFileIOUrl();t.metadata?r+=t.entityName+'?metadataFilter={"metadata.key": "'+t.metadata.key+'"}':r+=t.entityName+"/"+t.fileId;var a={Accept:i.contentType};e.http.get(r,{headers:e.setHeaders(a),responseType:"blob"}).subscribe((function(t){var n=new Blob([t.body],{type:i.contentType});e.saveFile(n,i.filename).then((function(t){})).catch((function(t){return o(t)}))}),(function(t){return o(t)}))}else o("fileInfo not exit")}),(function(t){return o(t)}))}))},t.prototype.saveFile=function(t,e){var n=this;return new Promise((function(o,i){if("mobile"==n.systemService.checkDevice()){var r=n.systemService.isAndroid()?cordova.file.externalRootDirectory:cordova.file.documentsDirectory;n.createDirectory(r,n.appProperties.appName,e,t).then((function(t){return o(t)})).catch((function(t){return i(t)}))}else n.saveToBrowser(t,e).then((function(t){return o(t)}))}))},t.prototype.saveToBrowser=function(t,e){return new Promise((function(n){if(!document.documentMode&&!!window.StyleMedia)window.navigator.msSaveBlob(t,e);else{var o=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.download=e,i.href=o,i.click(),window.URL.revokeObjectURL(o),document.body.removeChild(i),i.remove()}return n("download complete")}))},t.prototype.createDirectory=function(t,e,n,o){var i=this;return new Promise((function(r,a){window.resolveLocalFileSystemURL(t,(function(t){t.getDirectory(e,{create:!0},(function(t){i.checkFileExist(t.nativeURL,n,0,(function(e){t.getFile(e,{create:!0},(function(t){t.createWriter((function(e){e.onwriteend=function(){return r(t.toURL())},e.onerror=function(t){return a(t)},e.write(o)}))}))}))}),(function(t){return a(t)}))}),(function(t){return a(t)}))}))},t.prototype.setHeaders=function(t){var e=new o.HttpHeaders;for(var n in t)n&&(e=e.set(n,t[n]));return e},t.ctorParameters=function(){return[{type:o.HttpClient}]},t=f([e.Injectable()],t)}(),m=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getPicture().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getPicture=function(){var t=this;return new Promise((function(e,n){t.fsv.getPicture(t.cameraOptions).then((function(o){var i={formData:o,entityName:t.cameraOptions.entityName,metadata:t.cameraOptions.metadata};t.fsv.upload(i).then((function(t){return e(t)})).catch((function(t){return n(t)}))})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"cameraOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-camera]"})],t)}(),v=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.downloadFile().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.downloadFile=function(){return this.fsv.download(this.downloadOptions)},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"downloadOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-download]"})],t)}(),g=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getPicture().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getPicture=function(){var t=this;return new Promise((function(e,n){t.fsv.scanPicture(t.scanOptions).then((function(o){if(t.scanOptions.doUpload){var i={formData:o,entityName:t.scanOptions.entityName,metadata:t.scanOptions.metadata};t.fsv.upload(i).then((function(t){e(t)})).catch((function(t){return n(t)}))}else e(o)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"scanOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-scan]"})],t)}(),y=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getVideo().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getVideo=function(){var t=this;return new Promise((function(e,n){t.fsv.getVideo(t.videoOptions).then((function(o){var i={formData:o,entityName:t.videoOptions.entityName,metadata:t.videoOptions.metadata};t.fsv.upload(i).then((function(t){return e(t)})).catch((function(t){return n(t)}))})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"videoOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-video]"})],t)}(),b=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getBarcode().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getBarcode=function(){var t=this;return new Promise((function(e,n){t.fsv.getBarcode(t.barcodeOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"barcodeOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-barcode]"})],t)}(),w=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getTts().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getTts=function(){var t=this;return new Promise((function(e,n){t.fsv.getTts(t.ttsOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"ttsOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-tts]"})],t)}(),I=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getFingerprint().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getFingerprint=function(){var t=this;return new Promise((function(e,n){t.fsv.getFingerprint(t.fingerprintOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"fingerprintOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-fingerprint]"})],t)}(),O=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getOcr().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getOcr=function(){var t=this;return new Promise((function(e,n){t.fsv.getOcr(t.ocrOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"ocrOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-ocr]"})],t)}(),k=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getShake().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getShake=function(){var t=this;return new Promise((function(e,n){t.fsv.getShake(t.shakeOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t.ctorParameters=function(){return[{type:h}]},f([e.Input()],t.prototype,"shakeOptions",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),f([e.HostListener("click")],t.prototype,"methodToHandleMouseClickAction",null),t=f([e.Directive({selector:"[n-shake]"})],t)}(),x=function(){function t(t,n){this.fileIOService=t,this._renderer=n,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.handleUpload=function(){var t=this;this.isDone=!1,this.file&&this.uploadOptions&&this.uploadOptions.entityName&&this.uploadOptions.metadata?this.fileIOService.upload({files:this.file,entityName:this.uploadOptions.entityName,metadata:this.uploadOptions.metadata}).then((function(e){t.isDone=!0,t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)})):this.onerror.emit(new Error("Upload options missing"))},t.prototype.handleSelect=function(t){t.target.files&&t.target.files[0]&&(this.file=t.target.files[0],this.fileName=this.file.name)},t.prototype.cancel=function(){this.file=null,this.fileName=null,this.isDone=!1,this.fileInput&&this._renderer.setProperty(this.fileInput,"value","")},t.prototype.disableFileUploadButton=function(){return"boolean"==typeof this.disableButton?this.disableButton:"disabled"===this.disableButton||"true"===this.disableButton},t.ctorParameters=function(){return[{type:h},{type:e.Renderer2}]},f([e.ViewChild("fileInput",{static:!1})],t.prototype,"fileInput",void 0),f([e.Input()],t.prototype,"uploadOptions",void 0),f([e.Input("disabled")],t.prototype,"disableButton",void 0),f([e.Output()],t.prototype,"onsuccess",void 0),f([e.Output()],t.prototype,"onerror",void 0),t=f([e.Component({selector:"n-file-upload",template:'<div>\n  <button mat-raised-button class="bh-file-upload" (click)="fileInput.click()" color="primary"\n    *ngIf="!fileName" [disabled]="disableFileUploadButton()">\n    <mat-icon>attach_file</mat-icon>\n    <span>Choose a file...</span>\n    <input #fileInput type="file" (change)="handleSelect($event)" style="display:none;" />\n  </button>\n  <div *ngIf="fileName">\n    <button mat-raised-button color="primary" (click)="handleUpload()">\n      <mat-icon>file_upload</mat-icon>\n      <span>{{fileName}}</span>\n    </button>\n    <button *ngIf="!isDone" mat-icon-button color="warn" (click)="cancel()" class="bh-file-upload-cancel">\n      <mat-icon>cancel</mat-icon>\n    </button>\n    <button *ngIf="isDone" mat-icon-button (click)="cancel()" class="bh-file-upload-done">\n      <mat-icon>done</mat-icon>\n    </button>\n  </div>\n</div>\n',styles:[".bh-file-upload{padding-left:8px;padding-right:8px}.bh-file-upload-cancel{height:24px;width:24px;position:relative;top:24px;left:-12px}::ng-deep [dir=rtl] .bh-file-upload-cancel{right:-12px;left:0}.bh-file-upload-cancel mat-icon{border-radius:12px;vertical-align:baseline}.bh-file-upload-done{height:24px;width:24px;position:relative;top:20px;left:-13px}::ng-deep [dir=rtl] .bh-file-upload-done{right:-12px;left:0}.bh-file-upload-done mat-icon{border-radius:12px;vertical-align:baseline}"]})],t)}(),C=function(){function t(t){this.dialogRef=t,this.messageContent=n.message,this.titleContent=n.title}var n;return n=t,t.title="",t.message="",t.ctorParameters=function(){return[{type:u.MatDialogRef}]},t=n=f([e.Component({selector:"n-alert-dialog",template:'\n<div class="alertContainer" fxLayout="column">\n  <h4 mat-dialog-title>{{titleContent}}</h4>\n  <span class="msgContainer" >{{messageContent}}</span>\n  <button mat-raised-button (click)="dialogRef.close()">Close</button>\n</div>\n',styles:[".alertContainer{height:auto;width:auto}.msgContainer{margin-bottom:.5em}"]})],t)}(),P=function(){function t(t){this.dialog=t}return t.prototype.alert=function(t,e,n){C.message=t,C.title=e,this.dialog.open(C,n)},t.ctorParameters=function(){return[{type:u.MatDialog}]},t=f([e.Injectable()],t)}(),D=function(){function t(){this.toggleOptions=[],this.align="horizontal",this.indexChange=new e.EventEmitter,this.valueChange=new e.EventEmitter}return t.prototype.ngOnInit=function(){this.checkNumber(this.checkedIndex)&&(this.checkedIndex=Number(this.checkedIndex)),this.checkNumber(this.disabledIndex)&&(this.disabledIndex=Number(this.disabledIndex))},t.prototype.ngOnChanges=function(t){t.checkedIndex&&this.checkNumber(this.checkedIndex)?this.checkedIndex=Number(this.checkedIndex):t.disabledIndex&&this.checkNumber(this.disabledIndex)&&(this.disabledIndex=Number(this.disabledIndex))},t.prototype.optionClicked=function(t){this.toggleOptions&&this.toggleOptions.length>0&&(this.indexChange.emit(t),this.toggleOptions[t]&&this.toggleOptions[t].value&&this.valueChange.emit(this.toggleOptions[t].value))},t.prototype.checkNumber=function(t){return null!=t&&Number.isNaN(Number(t))},f([e.Input("toggleOptions")],t.prototype,"toggleOptions",void 0),f([e.Input("align")],t.prototype,"align",void 0),f([e.Input("disabledIndex")],t.prototype,"disabledIndex",void 0),f([e.Input("checkedIndex")],t.prototype,"checkedIndex",void 0),f([e.Input("value")],t.prototype,"value",void 0),f([e.Output()],t.prototype,"indexChange",void 0),f([e.Output()],t.prototype,"valueChange",void 0),t=f([e.Component({selector:"n-toggleoptions",template:'<mat-button-toggle-group #group="matButtonToggleGroup" [vertical]="align == \'vertical\'? true: false" [value]="value">\n    <mat-button-toggle *ngFor="let option of toggleOptions; let i = index;" [value]="option.value" [disabled]="option.disabled || disabledIndex == i" [checked]="option.checked || checkedIndex == i" (click)="optionClicked(i)" fxLayoutAlign="center center">\n        <mat-icon *ngIf="option.icon">{{option.icon}}</mat-icon>\n        <span *ngIf="!option.icon && option.value">{{option.value}}</span>\n    </mat-button-toggle>\n</mat-button-toggle-group>'})],t)}(),E=function(){function t(){this.imageDataValue="",this.signaturePad="",this.mode="responsive",this.canvasMode="responsive",this.imageDataChange=new e.EventEmitter}return Object.defineProperty(t.prototype,"imageData",{get:function(){return this.imageDataValue},set:function(t){this.imageDataValue=t,(t||""===t||this.isDataURL(t))&&this.saveCavas(t),this.imageDataChange.emit(this.imageDataValue)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){"responsive"===this.mode&&this.createCanvas()},t.prototype.createCanvas=function(){this.fitToContainer(this.signaturecanvas.nativeElement),this.signaturePad=new d(this.signaturecanvas.nativeElement,this.assignOptions())},t.prototype.saveCavas=function(t){this.signaturePad&&(this.signaturePad.isEmpty()||""===t?(this.savedData="",this.signaturePad.clear()):this.isDataURL(t)?(this.signaturePad.fromDataURL(t),this.savedData=this.signaturePad.toData()):(this.imageData=this.signaturePad.toDataURL(),"click-fullscreen"===this.mode&&(this.savedData=this.signaturePad.toData(),this.hideCanvas())))},t.prototype.clearCanvas=function(){this.signaturePad.clear()},t.prototype.undoCanvas=function(){var t=this.signaturePad.toData();t&&(t.pop(),this.signaturePad.fromData(t))},t.prototype.showCanvas=function(){this.classAbs=!0,this.canvasMode="fullscreen",this.signaturePad||this.createCanvas(),this.fitToContainer(this.signaturecanvas.nativeElement,document.body.clientHeight,document.body.clientWidth),this.clearCanvas(),this.createCanvasFromData()},t.prototype.hideCanvas=function(){this.canvasMode="responsive"},t.prototype.cancel=function(){this.savedData=Object.assign([],this.previousSavedData)},t.prototype.createCanvasFromData=function(){this.savedData&&(this.previousSavedData=Object.assign({},this.savedData),this.signaturePad.fromData(this.savedData))},t.prototype.fitToContainer=function(t,e,n){t.style.width="100%",t.style.height="calc(100% - 56px)",e&&n?(t.width=n,t.height=e-56):(t.width=t.offsetWidth,t.height=t.offsetHeight)},t.prototype.assignOptions=function(){var t={};return t.backgroundColor=this.checkIfValidValueAndRGB(this.backgroundColor,"backgroundColor"),t.dotSize=this.checkIfValidValueAndNumber(this.dotSize,"dotSize"),t.minWidth=this.checkIfValidValueAndNumber(this.minWidth,"minWidth"),t.maxWidth=this.checkIfValidValueAndNumber(this.maxWidth,"maxWidth"),t.throttle=this.checkIfValidValueAndNumber(this.throttle,"throttle"),t.minDistance=this.checkIfValidValueAndNumber(this.minDistance,"minDistance"),t.penColor=this.checkIfValidValueAndRGB(this.penColor,"penColor"),t.velocityFilterWeight=this.checkIfValidValueAndNumber(this.velocityFilterWeight,"velocityFilterWeight"),(t=JSON.parse(JSON.stringify(t))).onBegin=this.checkIfValidValueAndFunction(this.onBegin,"onBegin"),t.onEnd=this.checkIfValidValueAndFunction(this.onEnd,"onEnd"),t},t.prototype.checkIfValidValueAndNumber=function(t,e){if(this.checkIfValid(t)&&this.checkNumber(t))return t;this.invalidToast(e,"num")},t.prototype.checkIfValidValueAndRGB=function(t,e){if(this.checkIfValid(t)&&this.checkRGB(t))return t;this.invalidToast(e,"rgb")},t.prototype.checkIfValidValueAndFunction=function(t,e){if(this.checkIfValid(t)&&this.checkIfValidFunction(t))return t;this.invalidToast(e,"function format")},t.prototype.checkIfValid=function(t){return null!=t?t:void 0},t.prototype.checkNumber=function(t){return this.checkIsNan(Number(t))?void 0:Number(t)},t.prototype.checkIfValidFunction=function(t){return"function"==typeof t?t:void 0},t.prototype.checkRGB=function(t){var e=new RegExp(/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/),n=new RegExp(/rgb\((\d{1,3}),[ \t]+(\d{1,3}),(\d{1,3})\)/),o=new RegExp(/rgb\((\d{1,3}),(\d{1,3}),[ \t]+(\d{1,3})\)/);return e.test(t)||n.test(t)||o.test(t)},t.prototype.checkIsNan=function(t){return Number.isNaN(t)},t.prototype.invalidToast=function(t,e){e},t.prototype.isDataURL=function(t){if(t){return!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}return!1},f([e.ViewChild("signaturecanvas",{static:!1})],t.prototype,"signaturecanvas",void 0),f([e.ViewChild("canvasparent",{static:!1})],t.prototype,"canvasparent",void 0),f([e.Input("backgroundColor")],t.prototype,"backgroundColor",void 0),f([e.Input("dotSize")],t.prototype,"dotSize",void 0),f([e.Input("minWidth")],t.prototype,"minWidth",void 0),f([e.Input("maxWidth")],t.prototype,"maxWidth",void 0),f([e.Input("throttle")],t.prototype,"throttle",void 0),f([e.Input("minDistance")],t.prototype,"minDistance",void 0),f([e.Input("penColor")],t.prototype,"penColor",void 0),f([e.Input("velocityFilterWeight")],t.prototype,"velocityFilterWeight",void 0),f([e.Input("onBegin")],t.prototype,"onBegin",void 0),f([e.Input("onEnd")],t.prototype,"onEnd",void 0),f([e.Input("mode")],t.prototype,"mode",void 0),f([e.Output()],t.prototype,"imageDataChange",void 0),f([e.Input()],t.prototype,"imageData",null),t=f([e.Component({selector:"n-signature",template:'<div fxFill fxLayout="row" *ngIf="mode == \'click-fullscreen\' && canvasMode !== \'fullscreen\'" class="signature-component-border">\n    <div fxFlex="calc(100%-56px)" fxLayout="column">\n        <img *ngIf="imageDataValue" [src]="imageDataValue" fxFill/>\n    </div>\n    <div fxFlex="56px" fxLayoutAlign=" center" class="signature-component-border">\n        <button mat-icon-button (click)="showCanvas()">\n            <mat-icon>mode_edit</mat-icon>\n        </button>\n    </div>\n</div>\n<div fxFill fxLayout="column" class="signature-component-border" [fxShow]="(mode == \'click-fullscreen\' && canvasMode == \'fullscreen\') || mode == \'responsive\'" [ngClass]="{\'signature-canvas-fullscreen\': classAbs}">\n    <canvas #signaturecanvas></canvas>\n    <div fxFlex="56px" fxLayoutAlign="center center" class="signature-component-border">\n        <button mat-icon-button (click)="undoCanvas()">\n            <mat-icon>undo</mat-icon>\n        </button>\n        <button mat-icon-button (click)="clearCanvas()">\n            <mat-icon>loop</mat-icon>\n        </button>\n        <button mat-icon-button (click)="saveCavas()">\n            <mat-icon>save</mat-icon>\n        </button>\n        <button mat-icon-button (click)="canvasMode = \'responsive\'; cancel()">\n            <mat-icon>clear</mat-icon>\n        </button>\n    </div>\n</div>',styles:["\n     :host { height: 100% !important; }\n     .signature-canvas-fullscreen {\n         position: absolute;\n         top: 0;\n         bottom: 0;\n         right: 0;\n         left: 0;\n     }\n     .signature-component-border {\n         border: 2px solid black;\n     }\n    "]})],t)}(),N=[m,v,g,y,b,w,I,O,k,x,C,D,E],F=function(){function t(){}return t=f([e.NgModule({imports:[o.HttpClientModule,i.FormsModule,n.CommonModule,s.MatIconModule,u.MatDialogModule,l.MatButtonModule,r.BrowserAnimationsModule,p.MatButtonToggleModule,c.NeutrinosSeedServicesModule,a.FlexLayoutModule],declarations:[N],exports:[N,x,c.NeutrinosSeedServicesModule],providers:[h,P]})],t)}();t.NAlertComponent=C,t.NAlertService=P,t.NFileIOService=h,t.NFileUploadComponent=x,t.NeutrinosModule=F,t.ɵa=m,t.ɵb=v,t.ɵc=g,t.ɵd=y,t.ɵe=b,t.ɵf=w,t.ɵg=I,t.ɵh=O,t.ɵi=k,t.ɵj=D,t.ɵk=E,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=neutrinos-module.umd.min.js.map