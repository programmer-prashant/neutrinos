/**
 * @fileoverview added by tsickle
 * Generated from: lib/config/ng-forage-config.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Inject, Injectable, Optional } from '@angular/core';
import 'localforage';
import { localForage as lf } from '../imports/localforage';
import { Driver } from '../misc/driver.enum';
import { DEFAULT_CONFIG } from '../misc/injection-tokens';
import * as i0 from "@angular/core";
import * as i1 from "../misc/injection-tokens";
/**
 * \@internal
 * @type {?}
 */
const $defaultConfig = Symbol('Default Config');
/**
 * Global/default configuration
 */
export class NgForageConfig {
    /**
     * @param {?} conf
     */
    constructor(conf) {
        this[$defaultConfig] = {
            cacheTime: 300000,
            description: '',
            driver: [Driver.INDEXED_DB, Driver.WEB_SQL, Driver.LOCAL_STORAGE],
            name: 'ngForage',
            size: 4980736,
            storeName: 'ng_forage',
            version: 1
        };
        if (conf) {
            this.configure(conf);
        }
    }
    /**
     * Cache time in milliseconds
     * \@default 300000
     * @return {?}
     */
    get cacheTime() {
        return (/** @type {?} */ (this[$defaultConfig].cacheTime));
    }
    /**
     * @param {?} t
     * @return {?}
     */
    set cacheTime(t) {
        this[$defaultConfig].cacheTime = t;
    }
    /**
     * Get the compiled configuration
     * @return {?}
     */
    get config() {
        return {
            cacheTime: this.cacheTime,
            description: this.description,
            driver: this.driver,
            name: this.name,
            size: this.size,
            storeName: this.storeName,
            version: this.version
        };
    }
    /**
     * A description of the database, essentially for developer usage.
     * \@default
     * @return {?}
     */
    get description() {
        return (/** @type {?} */ (this[$defaultConfig].description));
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set description(v) {
        this[$defaultConfig].description = v;
    }
    /**
     * The preferred driver(s) to use.
     * @return {?}
     */
    get driver() {
        if (typeof this[$defaultConfig].driver === 'string') {
            return (/** @type {?} */ (this[$defaultConfig].driver));
        }
        return ((/** @type {?} */ (this[$defaultConfig].driver))).slice();
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set driver(v) {
        this[$defaultConfig].driver = v;
    }
    /**
     * The name of the database. May appear during storage limit prompts. Useful to use the name of your app here.
     * In localStorage, this is used as a key prefix for all keys stored in localStorage.
     * \@default ngForage
     * @return {?}
     */
    get name() {
        return (/** @type {?} */ (this[$defaultConfig].name));
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set name(v) {
        this[$defaultConfig].name = v;
    }
    /**
     * The size of the database in bytes. Used only in WebSQL for now.
     * \@default 4980736
     * @return {?}
     */
    get size() {
        return (/** @type {?} */ (this[$defaultConfig].size));
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set size(v) {
        this[$defaultConfig].size = v;
    }
    /**
     * The name of the datastore.
     * In IndexedDB this is the dataStore,
     * in WebSQL this is the name of the key/value table in the database.
     * Must be alphanumeric, with underscores.
     * Any non-alphanumeric characters will be converted to underscores.
     * \@default ng_forage
     * @return {?}
     */
    get storeName() {
        return (/** @type {?} */ (this[$defaultConfig].storeName));
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set storeName(v) {
        this[$defaultConfig].storeName = v;
    }
    /**
     * The version of your database. May be used for upgrades in the future; currently unused.
     * \@default 1.0
     * @return {?}
     */
    get version() {
        return (/** @type {?} */ (this[$defaultConfig].version));
    }
    /**
     * @param {?} v
     * @return {?}
     */
    set version(v) {
        this[$defaultConfig].version = v;
    }
    /**
     * Bulk-set configuration options
     * @template THIS
     * @this {THIS}
     * @param {?} opts The configuration
     * @return {THIS}
     */
    configure(opts) {
        opts = opts || {};
        if (opts.driver && ((/** @type {?} */ (opts.driver))).slice) {
            opts.driver = ((/** @type {?} */ (opts.driver))).slice();
        }
        Object.assign((/** @type {?} */ (this))[$defaultConfig], opts);
        return (/** @type {?} */ (this));
    }
    /**
     * Define a driver
     *
     * You’ll want to make sure you accept a callback argument and that you pass the same arguments to callbacks as the
     * default drivers do. You’ll also want to resolve or reject promises.
     * Check any of the {\@link https://github.com/mozilla/localForage/tree/master/src/drivers default drivers}
     * for an idea of how to implement your own, custom driver.
     * @param {?} spec Driver spec
     * @return {?}
     */
    defineDriver(spec) {
        return lf.defineDriver(spec);
    }
    /**
     * \@internal
     * @return {?}
     */
    toJSON() {
        return this.config;
    }
    /**
     * @return {?}
     */
    toString() {
        return JSON.stringify(this.toJSON());
    }
}
NgForageConfig.decorators = [
    { type: Injectable, args: [{ providedIn: 'root' },] }
];
/** @nocollapse */
NgForageConfig.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [DEFAULT_CONFIG,] }] }
];
/** @nocollapse */ NgForageConfig.ɵprov = i0.ɵɵdefineInjectable({ factory: function NgForageConfig_Factory() { return new NgForageConfig(i0.ɵɵinject(i1.DEFAULT_CONFIG, 8)); }, token: NgForageConfig, providedIn: "root" });
if (false) {
    /* Skipping unnamed member:
    private readonly [$defaultConfig]: NgForageOptions;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctZm9yYWdlLWNvbmZpZy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmdmb3JhZ2UvIiwic291cmNlcyI6WyJsaWIvY29uZmlnL25nLWZvcmFnZS1jb25maWcuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLGFBQWEsQ0FBQztBQUNyQixPQUFPLEVBQUMsV0FBVyxJQUFJLEVBQUUsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRXpELE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUMzQyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sMEJBQTBCLENBQUM7Ozs7Ozs7TUFNbEQsY0FBYyxHQUFrQixNQUFNLENBQUMsZ0JBQWdCLENBQUM7Ozs7QUFNOUQsTUFBTSxPQUFPLGNBQWM7Ozs7SUFLekIsWUFBdUQsSUFBcUI7UUFDMUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHO1lBQ3JCLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLFdBQVcsRUFBRSxFQUFFO1lBQ2YsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxhQUFhLENBQUM7WUFDakUsSUFBSSxFQUFFLFVBQVU7WUFDaEIsSUFBSSxFQUFFLE9BQU87WUFDYixTQUFTLEVBQUUsV0FBVztZQUN0QixPQUFPLEVBQUUsQ0FBQztTQUNYLENBQUM7UUFDRixJQUFJLElBQUksRUFBRTtZQUNSLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdEI7SUFDSCxDQUFDOzs7Ozs7SUFNRCxJQUFXLFNBQVM7UUFDbEIsT0FBTyxtQkFBUSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsU0FBUyxFQUFBLENBQUM7SUFDaEQsQ0FBQzs7Ozs7SUFFRCxJQUFXLFNBQVMs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QUFNLENBQUMsTUFBTSxDQUFDLG1CQUFBLElBQUksRUFBQSxDQUFDLGNBQWMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRTFDLE9BQU8sbUJBQUEsSUFBSSxFQUFBLENBQUM7SUFDZCxDQUFDOzs7Ozs7Ozs7OztJQVdNLFlBQVksQ0FBQyxJQUF1QjtRQUN6QyxPQUFPLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQzs7Ozs7SUFHTSxNQUFNO1FBQ1gsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7Ozs7SUFFTSxRQUFRO1FBQ2IsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7OztZQXBLRixVQUFVLFNBQUMsRUFBQyxVQUFVLEVBQUUsTUFBTSxFQUFDOzs7OzRDQU1WLFFBQVEsWUFBSSxNQUFNLFNBQUMsY0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgJ2xvY2FsZm9yYWdlJztcbmltcG9ydCB7bG9jYWxGb3JhZ2UgYXMgbGZ9IGZyb20gJy4uL2ltcG9ydHMvbG9jYWxmb3JhZ2UnO1xuaW1wb3J0IHtEcml2ZXJUeXBlfSBmcm9tICcuLi9taXNjL2RyaXZlci10eXBlLnR5cGUnO1xuaW1wb3J0IHtEcml2ZXJ9IGZyb20gJy4uL21pc2MvZHJpdmVyLmVudW0nO1xuaW1wb3J0IHtERUZBVUxUX0NPTkZJR30gZnJvbSAnLi4vbWlzYy9pbmplY3Rpb24tdG9rZW5zJztcbmltcG9ydCB7QmFzZUNvbmZpZ3VyYWJsZX0gZnJvbSAnLi9iYXNlLWNvbmZpZ3VyYWJsZSc7XG5pbXBvcnQge0NhY2hlQ29uZmlndXJhYmxlfSBmcm9tICcuL2NhY2hlLWNvbmZpZ3VyYWJsZSc7XG5pbXBvcnQge05nRm9yYWdlT3B0aW9uc30gZnJvbSAnLi9uZy1mb3JhZ2Utb3B0aW9ucyc7XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmNvbnN0ICRkZWZhdWx0Q29uZmlnOiB1bmlxdWUgc3ltYm9sID0gU3ltYm9sKCdEZWZhdWx0IENvbmZpZycpO1xuXG4vKipcbiAqIEdsb2JhbC9kZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAqL1xuQEluamVjdGFibGUoe3Byb3ZpZGVkSW46ICdyb290J30pXG5leHBvcnQgY2xhc3MgTmdGb3JhZ2VDb25maWcgaW1wbGVtZW50cyBCYXNlQ29uZmlndXJhYmxlLCBDYWNoZUNvbmZpZ3VyYWJsZSB7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwcml2YXRlIHJlYWRvbmx5IFskZGVmYXVsdENvbmZpZ106IE5nRm9yYWdlT3B0aW9ucztcblxuICBwdWJsaWMgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChERUZBVUxUX0NPTkZJRykgY29uZjogTmdGb3JhZ2VPcHRpb25zKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10gPSB7XG4gICAgICBjYWNoZVRpbWU6IDMwMDAwMCxcbiAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgIGRyaXZlcjogW0RyaXZlci5JTkRFWEVEX0RCLCBEcml2ZXIuV0VCX1NRTCwgRHJpdmVyLkxPQ0FMX1NUT1JBR0VdLFxuICAgICAgbmFtZTogJ25nRm9yYWdlJyxcbiAgICAgIHNpemU6IDQ5ODA3MzYsXG4gICAgICBzdG9yZU5hbWU6ICduZ19mb3JhZ2UnLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH07XG4gICAgaWYgKGNvbmYpIHtcbiAgICAgIHRoaXMuY29uZmlndXJlKGNvbmYpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAZGVmYXVsdCAzMDAwMDBcbiAgICovXG4gIHB1YmxpYyBnZXQgY2FjaGVUaW1lKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDxudW1iZXI+dGhpc1skZGVmYXVsdENvbmZpZ10uY2FjaGVUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldCBjYWNoZVRpbWUodDogbnVtYmVyKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10uY2FjaGVUaW1lID0gdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbXBpbGVkIGNvbmZpZ3VyYXRpb25cbiAgICovXG4gIHB1YmxpYyBnZXQgY29uZmlnKCk6IE5nRm9yYWdlT3B0aW9ucyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhY2hlVGltZTogdGhpcy5jYWNoZVRpbWUsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIGRyaXZlcjogdGhpcy5kcml2ZXIsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICBzaXplOiB0aGlzLnNpemUsXG4gICAgICBzdG9yZU5hbWU6IHRoaXMuc3RvcmVOYW1lLFxuICAgICAgdmVyc2lvbjogdGhpcy52ZXJzaW9uXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBkYXRhYmFzZSwgZXNzZW50aWFsbHkgZm9yIGRldmVsb3BlciB1c2FnZS5cbiAgICogQGRlZmF1bHRcbiAgICovXG4gIHB1YmxpYyBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gPHN0cmluZz50aGlzWyRkZWZhdWx0Q29uZmlnXS5kZXNjcmlwdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgZGVzY3JpcHRpb24odjogc3RyaW5nKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10uZGVzY3JpcHRpb24gPSB2O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwcmVmZXJyZWQgZHJpdmVyKHMpIHRvIHVzZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgZHJpdmVyKCk6IERyaXZlclR5cGUgfCBEcml2ZXJUeXBlW10ge1xuICAgIGlmICh0eXBlb2YgdGhpc1skZGVmYXVsdENvbmZpZ10uZHJpdmVyID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIDxzdHJpbmc+dGhpc1skZGVmYXVsdENvbmZpZ10uZHJpdmVyO1xuICAgIH1cblxuICAgIHJldHVybiAoPHN0cmluZ1tdPnRoaXNbJGRlZmF1bHRDb25maWddLmRyaXZlcikuc2xpY2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgZHJpdmVyKHY6IERyaXZlclR5cGUgfCBEcml2ZXJUeXBlW10pIHtcbiAgICB0aGlzWyRkZWZhdWx0Q29uZmlnXS5kcml2ZXIgPSB2O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZS4gTWF5IGFwcGVhciBkdXJpbmcgc3RvcmFnZSBsaW1pdCBwcm9tcHRzLiBVc2VmdWwgdG8gdXNlIHRoZSBuYW1lIG9mIHlvdXIgYXBwIGhlcmUuXG4gICAqIEluIGxvY2FsU3RvcmFnZSwgdGhpcyBpcyB1c2VkIGFzIGEga2V5IHByZWZpeCBmb3IgYWxsIGtleXMgc3RvcmVkIGluIGxvY2FsU3RvcmFnZS5cbiAgICogQGRlZmF1bHQgbmdGb3JhZ2VcbiAgICovXG4gIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiA8c3RyaW5nPnRoaXNbJGRlZmF1bHRDb25maWddLm5hbWU7XG4gIH1cblxuICBwdWJsaWMgc2V0IG5hbWUodjogc3RyaW5nKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10ubmFtZSA9IHY7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGRhdGFiYXNlIGluIGJ5dGVzLiBVc2VkIG9ubHkgaW4gV2ViU1FMIGZvciBub3cuXG4gICAqIEBkZWZhdWx0IDQ5ODA3MzZcbiAgICovXG4gIHB1YmxpYyBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiA8bnVtYmVyPnRoaXNbJGRlZmF1bHRDb25maWddLnNpemU7XG4gIH1cblxuICBwdWJsaWMgc2V0IHNpemUodjogbnVtYmVyKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10uc2l6ZSA9IHY7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGRhdGFzdG9yZS5cbiAgICogSW4gSW5kZXhlZERCIHRoaXMgaXMgdGhlIGRhdGFTdG9yZSxcbiAgICogaW4gV2ViU1FMIHRoaXMgaXMgdGhlIG5hbWUgb2YgdGhlIGtleS92YWx1ZSB0YWJsZSBpbiB0aGUgZGF0YWJhc2UuXG4gICAqIE11c3QgYmUgYWxwaGFudW1lcmljLCB3aXRoIHVuZGVyc2NvcmVzLlxuICAgKiBBbnkgbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpbGwgYmUgY29udmVydGVkIHRvIHVuZGVyc2NvcmVzLlxuICAgKiBAZGVmYXVsdCBuZ19mb3JhZ2VcbiAgICovXG4gIHB1YmxpYyBnZXQgc3RvcmVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIDxzdHJpbmc+dGhpc1skZGVmYXVsdENvbmZpZ10uc3RvcmVOYW1lO1xuICB9XG5cbiAgcHVibGljIHNldCBzdG9yZU5hbWUodjogc3RyaW5nKSB7XG4gICAgdGhpc1skZGVmYXVsdENvbmZpZ10uc3RvcmVOYW1lID0gdjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdmVyc2lvbiBvZiB5b3VyIGRhdGFiYXNlLiBNYXkgYmUgdXNlZCBmb3IgdXBncmFkZXMgaW4gdGhlIGZ1dHVyZTsgY3VycmVudGx5IHVudXNlZC5cbiAgICogQGRlZmF1bHQgMS4wXG4gICAqL1xuICBwdWJsaWMgZ2V0IHZlcnNpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gPG51bWJlcj50aGlzWyRkZWZhdWx0Q29uZmlnXS52ZXJzaW9uO1xuICB9XG5cbiAgcHVibGljIHNldCB2ZXJzaW9uKHY6IG51bWJlcikge1xuICAgIHRoaXNbJGRlZmF1bHRDb25maWddLnZlcnNpb24gPSB2O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1bGstc2V0IGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0gb3B0cyBUaGUgY29uZmlndXJhdGlvblxuICAgKi9cbiAgcHVibGljIGNvbmZpZ3VyZShvcHRzOiBOZ0ZvcmFnZU9wdGlvbnMpOiB0aGlzIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIGlmIChvcHRzLmRyaXZlciAmJiAoPGFueVtdPm9wdHMuZHJpdmVyKS5zbGljZSkge1xuICAgICAgb3B0cy5kcml2ZXIgPSAoPERyaXZlclR5cGVbXT5vcHRzLmRyaXZlcikuc2xpY2UoKTtcbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXNbJGRlZmF1bHRDb25maWddLCBvcHRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIGRyaXZlclxuICAgKlxuICAgKiBZb3XigJlsbCB3YW50IHRvIG1ha2Ugc3VyZSB5b3UgYWNjZXB0IGEgY2FsbGJhY2sgYXJndW1lbnQgYW5kIHRoYXQgeW91IHBhc3MgdGhlIHNhbWUgYXJndW1lbnRzIHRvIGNhbGxiYWNrcyBhcyB0aGVcbiAgICogZGVmYXVsdCBkcml2ZXJzIGRvLiBZb3XigJlsbCBhbHNvIHdhbnQgdG8gcmVzb2x2ZSBvciByZWplY3QgcHJvbWlzZXMuXG4gICAqIENoZWNrIGFueSBvZiB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL3RyZWUvbWFzdGVyL3NyYy9kcml2ZXJzIGRlZmF1bHQgZHJpdmVyc31cbiAgICogZm9yIGFuIGlkZWEgb2YgaG93IHRvIGltcGxlbWVudCB5b3VyIG93biwgY3VzdG9tIGRyaXZlci5cbiAgICogQHBhcmFtIHNwZWMgRHJpdmVyIHNwZWNcbiAgICovXG4gIHB1YmxpYyBkZWZpbmVEcml2ZXIoc3BlYzogTG9jYWxGb3JhZ2VEcml2ZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbGYuZGVmaW5lRHJpdmVyKHNwZWMpO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgdG9KU09OKCk6IE5nRm9yYWdlT3B0aW9ucyB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpO1xuICB9XG59XG4iXX0=