import * as platform from 'platform';
// @dynamic
export class NSystemService {
    constructor() {
        this._deviceType = this.checkDevice();
    }
    static getInstance() {
        if (!this.instance) {
            this.instance = new NSystemService();
        }
        return this.instance;
    }
    /**
     * Seter and getter for the environments
     */
    // set environments(properties) {
    //   console.log(properties);
    //   NSystemService.envProperties = properties;
    //   this.properties = this.getVal('properties');
    // }
    // get environments() {
    //   return NSystemService.envProperties;
    // }
    /**
     * Returna 'mobile' or 'browser' based on the platform
     */
    checkDevice() {
        if (window['device'] && (window['device']['platform'] != 'browser' || window['device']['platform'] != 'Browser')) {
            return 'mobile';
        }
        else if (window['device'] && (window['device']['platform'] == 'browser' || window['device']['platform'] == 'Browser')) {
            return 'cordova_browser';
        }
        else {
            return 'browser';
        }
    }
    get deviceType() {
        return this._deviceType;
    }
    getVal(key) {
        if (!NSystemService.envProperties) {
            NSystemService.envProperties = window['neutrinos']['environments'];
            this.properties = NSystemService.envProperties.properties;
        }
        if (key == 'properties') {
            if (NSystemService.envProperties) {
                return NSystemService.envProperties.properties;
            }
            else {
                return undefined;
            }
        }
        else {
            if (NSystemService.envProperties && NSystemService.envProperties.properties) {
                return NSystemService.envProperties.properties[key];
            }
            else {
                return undefined;
            }
        }
    }
    isAndroid() {
        if (window['device'] && window['device']['platform'] == 'Android') {
            return true;
        }
        else {
            return false;
        }
    }
    isIOS() {
        if (window['device'] && window['device']['platform'] == 'iOS') {
            return true;
        }
        else {
            return false;
        }
    }
    getAndroidVersion() {
        if (this.isAndroid()) {
            return window['device']['version'];
        }
        else {
            return '';
        }
    }
    getAuthUrl() {
        // this.properties = this.getVal('properties');
        return this.properties.baseUrl + this.properties.tenantName + '/auth/';
    }
    getTenantUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/';
    }
    getAppUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/proxy/' + this.properties.appName + '/';
    }
    getProxyUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/proxy/';
    }
    getDataModelUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/datamodel/' + this.properties.appDataSource + '/' + this.properties.appName + '/';
    }
    getFileIOUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/fileio/' +
            this.properties.appDataSource + '/' + this.properties.appName + '/';
    }
    getPlatformDetails(type) {
        const pDetails = {
            platform: platform.os.family,
            platformVersion: platform.os.version,
        };
        if (type === 'browser') {
            return Object.assign(pDetails, {
                type: 'browser',
                browser: platform.name,
                browserVersion: platform.version,
            });
        }
        else if (type === 'mobile' || type === 'cordova_browser') {
            return Object.assign(pDetails, {
                type: 'mobile',
                model: window['device'].model,
                manufacturer: window['device'].manufacturer,
                isVirtual: window['device'].isVirtual
            });
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibi1zeXN0ZW0uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9uZXV0cmlub3MvRG9jdW1lbnRzL25ldXRyaW5vcy1tb2R1bGVzLWFuZ3VsYXIvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvIiwic291cmNlcyI6WyJzcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tc3lzdGVtLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxLQUFLLFFBQVEsTUFBTSxVQUFVLENBQUM7QUFFckMsV0FBVztBQUNYLE1BQU0sT0FBTyxjQUFjO0lBZXpCO1FBQ0UsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDeEMsQ0FBQztJQVRELE1BQU0sQ0FBQyxXQUFXO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztTQUN0QztRQUNELE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBTUQ7O09BRUc7SUFFSCxpQ0FBaUM7SUFDakMsNkJBQTZCO0lBQzdCLCtDQUErQztJQUMvQyxpREFBaUQ7SUFDakQsSUFBSTtJQUVKLHVCQUF1QjtJQUN2Qix5Q0FBeUM7SUFDekMsSUFBSTtJQUVKOztPQUVHO0lBQ0gsV0FBVztRQUNULElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFNBQVMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksU0FBUyxDQUFDLEVBQUU7WUFDaEgsT0FBTyxRQUFRLENBQUM7U0FDakI7YUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxTQUFTLElBQUksTUFB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QVk7UUFDakIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsR0FBRyxVQUFVO1lBQ3RFLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7SUFDeEUsQ0FBQztJQUVNLGtCQUFrQixDQUFDLElBQUk7UUFDNUIsTUFBTSxRQUFRLEdBQUc7WUFDZixRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQyxNQUFNO1lBQzVCLGVBQWUsRUFBRSxRQUFRLENBQUMsRUFBRSxDQUFDLE9BQU87U0FDckMsQ0FBQztRQUNGLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtZQUN0QixPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFO2dCQUM3QixJQUFJLEVBQUUsU0FBUztnQkFDZixPQUFPLEVBQUUsUUFBUSxDQUFDLElBQUk7Z0JBQ3RCLGNBQWMsRUFBRSxRQUFRLENBQUMsT0FBTzthQUNqQyxDQUFDLENBQUM7U0FDSjthQUFNLElBQUksSUFBSSxLQUFLLFFBQVEsSUFBSSxJQUFJLEtBQUssaUJBQWlCLEVBQUU7WUFDMUQsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtnQkFDN0IsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsS0FBSyxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLO2dCQUM3QixZQUFZLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVk7Z0JBQzNDLFNBQVMsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUzthQUN0QyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IGVudmlyb25tZW50IH0gZnJvbSAnLi4vLi4vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50JztcbmltcG9ydCB7IE5VdGlsaXR5IH0gZnJvbSAnLi9uLXV0aWwuc2VydmljZSc7XG5pbXBvcnQgeyBOTG9jYWxTdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1sb2NhbFN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICdwbGF0Zm9ybSc7XG5cbi8vIEBkeW5hbWljXG5leHBvcnQgY2xhc3MgTlN5c3RlbVNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTlN5c3RlbVNlcnZpY2U7XG5cbiAgcHJpdmF0ZSBfZGV2aWNlVHlwZTogc3RyaW5nO1xuICAvLyBwcml2YXRlIF9kZXZpY2VVVUlEO1xuICB1dWlkO1xuICBwcm9wZXJ0aWVzO1xuICBzdGF0aWMgZW52UHJvcGVydGllcztcbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICghdGhpcy5pbnN0YW5jZSkge1xuICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBOU3lzdGVtU2VydmljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fZGV2aWNlVHlwZSA9IHRoaXMuY2hlY2tEZXZpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRlciBhbmQgZ2V0dGVyIGZvciB0aGUgZW52aXJvbm1lbnRzXG4gICAqL1xuXG4gIC8vIHNldCBlbnZpcm9ubWVudHMocHJvcGVydGllcykge1xuICAvLyAgIGNvbnNvbGUubG9nKHByb3BlcnRpZXMpO1xuICAvLyAgIE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAvLyAgIHRoaXMucHJvcGVydGllcyA9IHRoaXMuZ2V0VmFsKCdwcm9wZXJ0aWVzJyk7XG4gIC8vIH1cblxuICAvLyBnZXQgZW52aXJvbm1lbnRzKCkge1xuICAvLyAgIHJldHVybiBOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzO1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIFJldHVybmEgJ21vYmlsZScgb3IgJ2Jyb3dzZXInIGJhc2VkIG9uIHRoZSBwbGF0Zm9ybVxuICAgKi9cbiAgY2hlY2tEZXZpY2UoKTogc3RyaW5nIHtcbiAgICBpZiAod2luZG93WydkZXZpY2UnXSAmJiAod2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSAhPSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSAhPSAnQnJvd3NlcicpKSB7XG4gICAgICByZXR1cm4gJ21vYmlsZSc7XG4gICAgfSBlbHNlIGlmICh3aW5kb3dbJ2RldmljZSddICYmICh3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09ICdicm93c2VyJyB8fCB3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09ICdCcm93c2VyJykpIHtcbiAgICAgIHJldHVybiAnY29yZG92YV9icm93c2VyJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdicm93c2VyJztcbiAgICB9XG4gIH1cblxuXG4gIHB1YmxpYyBnZXQgZGV2aWNlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGV2aWNlVHlwZTtcbiAgfVxuXG5cblxuICBwdWJsaWMgZ2V0VmFsKGtleSkge1xuICAgIGlmICghTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcykge1xuICAgICAgTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcyA9IHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddO1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT0gJ3Byb3BlcnRpZXMnKSB7XG4gICAgICBpZiAoTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMgJiYgTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzLnByb3BlcnRpZXNba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfVxuXG4gIHB1YmxpYyBpc0FuZHJvaWQoKSB7XG4gICAgaWYgKHdpbmRvd1snZGV2aWNlJ10gJiYgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PSAnQW5kcm9pZCcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzSU9TKCkge1xuICAgIGlmICh3aW5kb3dbJ2RldmljZSddICYmIHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gPT0gJ2lPUycpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEFuZHJvaWRWZXJzaW9uKCkge1xuICAgIGlmICh0aGlzLmlzQW5kcm9pZCgpKSB7XG4gICAgICByZXR1cm4gd2luZG93WydkZXZpY2UnXVsndmVyc2lvbiddO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEF1dGhVcmwoKSB7XG4gICAgLy8gdGhpcy5wcm9wZXJ0aWVzID0gdGhpcy5nZXRWYWwoJ3Byb3BlcnRpZXMnKTtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmJhc2VVcmwgKyB0aGlzLnByb3BlcnRpZXMudGVuYW50TmFtZSArICcvYXV0aC8nO1xuICB9XG4gIHB1YmxpYyBnZXRUZW5hbnRVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5iYXNlVXJsICsgdGhpcy5wcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXBwVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9wcm94eS8nICsgdGhpcy5wcm9wZXJ0aWVzLmFwcE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJveHlVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5iYXNlVXJsICsgdGhpcy5wcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnL3Byb3h5Lyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0RGF0YU1vZGVsVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9kYXRhbW9kZWwvJyArIHRoaXMucHJvcGVydGllcy5hcHBEYXRhU291cmNlICsgJy8nICsgdGhpcy5wcm9wZXJ0aWVzLmFwcE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0RmlsZUlPVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9maWxlaW8vJyArXG4gICAgICB0aGlzLnByb3BlcnRpZXMuYXBwRGF0YVNvdXJjZSArICcvJyArIHRoaXMucHJvcGVydGllcy5hcHBOYW1lICsgJy8nO1xuICB9XG5cbiAgcHVibGljIGdldFBsYXRmb3JtRGV0YWlscyh0eXBlKSB7XG4gICAgY29uc3QgcERldGFpbHMgPSB7XG4gICAgICBwbGF0Zm9ybTogcGxhdGZvcm0ub3MuZmFtaWx5LFxuICAgICAgcGxhdGZvcm1WZXJzaW9uOiBwbGF0Zm9ybS5vcy52ZXJzaW9uLFxuICAgIH07XG4gICAgaWYgKHR5cGUgPT09ICdicm93c2VyJykge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocERldGFpbHMsIHtcbiAgICAgICAgdHlwZTogJ2Jyb3dzZXInLFxuICAgICAgICBicm93c2VyOiBwbGF0Zm9ybS5uYW1lLFxuICAgICAgICBicm93c2VyVmVyc2lvbjogcGxhdGZvcm0udmVyc2lvbixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21vYmlsZScgfHwgdHlwZSA9PT0gJ2NvcmRvdmFfYnJvd3NlcicpIHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHBEZXRhaWxzLCB7XG4gICAgICAgIHR5cGU6ICdtb2JpbGUnLFxuICAgICAgICBtb2RlbDogd2luZG93WydkZXZpY2UnXS5tb2RlbCxcbiAgICAgICAgbWFudWZhY3R1cmVyOiB3aW5kb3dbJ2RldmljZSddLm1hbnVmYWN0dXJlcixcbiAgICAgICAgaXNWaXJ0dWFsOiB3aW5kb3dbJ2RldmljZSddLmlzVmlydHVhbFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=