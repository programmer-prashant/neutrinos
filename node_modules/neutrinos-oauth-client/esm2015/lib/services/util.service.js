/**
 * @fileoverview added by tsickle
 * Generated from: lib/services/util.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, isDevMode } from '@angular/core';
import * as i0 from "@angular/core";
export class UtilService {
    constructor() {
        this.platformType = this.checkPlatformType();
        this.getEnvironment();
    }
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @return {?}
     */
    getPlatformType() {
        return this.platformType;
    }
    /**
     * Returns env from neutrinos seed app
     * @private
     * @return {?}
     */
    getEnvironment() {
        if (window['neutrinos'] && window['neutrinos']['environments'] && window['neutrinos']['environments']['properties']) {
            // Break the refernce
            this.environment = JSON.parse(JSON.stringify(window['neutrinos']['environments']['properties']));
            // Append the url with / if ssdUrl does not end with /
            if (this.environment['ssdURL']) {
                this.environment['ssdURL'] = this.environment['ssdURL'].endsWith('/') ? this.environment['ssdURL'] :
                    (this.environment['ssdURL'] + '/');
            }
            return;
        }
        /*For dev env only */
        this.environment = {
            ssdURL: 'http://localhost:8081/api/',
            useDefaultExceptionUI: true,
            isIDSEnabled: 'true',
            webAppMountpoint: '',
            production: true
        };
    }
    /**
     * Returns 'mobile' or 'browser' based on the platform
     * @private
     * @return {?}
     */
    checkPlatformType() {
        // tslint:disable-next-line: no-string-literal
        if (window['device'] && (window['device']['platform'] !== 'browser' || window['device']['platform'] !== 'Browser')) {
            return 'mobile';
            // tslint:disable-next-line: no-string-literal
        }
        else if (window['device'] && (window['device']['platform'] === 'browser' || window['device']['platform'] === 'Browser')) {
            return 'cordova_browser';
        }
        else {
            return 'browser';
        }
    }
    /*URL helper methods */
    /**
     * @return {?}
     */
    getBaseLoginPath() {
        return `${this.environment.ssdURL}login`;
    }
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    getWebLoginUrl(redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return `${this.getBaseLoginPath()}?redirectTo=${redirectTo}`;
    }
    /**
     * @return {?}
     */
    getMobileLoginUrl() {
        return `${this.getBaseLoginPath()}?isMobile=true`;
    }
    /**
     * @param {?} redirectTo
     * @return {?}
     */
    getWebLogoutUrl(redirectTo) {
        redirectTo = this.calcRedirectUrl(redirectTo);
        return `${this.environment.ssdURL}logout?redirectTo=${redirectTo}`;
    }
    /**
     * @return {?}
     */
    getMobileLogoutUrl() {
        return `${this.environment.ssdURL}logout?isMobile=true`;
    }
    /**
     * @return {?}
     */
    getUserInfoUrl() {
        return `${this.environment.ssdURL}user/info`;
    }
    /**
     * @return {?}
     */
    getSSDBasePath() {
        return `${this.environment.ssdURL}`;
    }
    /**
     *  Returns a absoulte url for the urlPath
     * @private
     * @param {?} urlPath - path relative to the current host
     * @return {?}
     */
    calcRedirectUrl(urlPath) {
        if (urlPath) {
            /** @type {?} */
            let host = new URL(window.location.href).origin;
            if (!isDevMode()) {
                // Append `webAppMountpoint` to host
                host = (this.environment.webAppMountpoint !== '' && this.environment.webAppMountpoint !== '/')
                    ? new URL(this.environment.webAppMountpoint, host).href : host;
                // Get user redirect path with `webAppMountpoint`
                /** @type {?} */
                const mountPointWithRedirect = new URL(urlPath, host).pathname;
                return host + mountPointWithRedirect;
            }
            else {
                return new URL(urlPath, host);
            }
        }
        else {
            return window.location.href;
        }
    }
    /**
     *
     * @param {?} property - environment property key
     * @return {?}
     */
    getEnvValue(property) {
        return this.environment[property];
    }
}
UtilService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
UtilService.ctorParameters = () => [];
/** @nocollapse */ UtilService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UtilService_Factory() { return new UtilService(); }, token: UtilService, providedIn: "root" });
if (false) {
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.platformType;
    /**
     * @type {?}
     * @private
     */
    UtilService.prototype.environment;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL25ldXRyaW5vcy9Eb2N1bWVudHMvbmV1dHJpbm9zLW1vZHVsZXMtYW5ndWxhci9uZXV0cmlub3MtYXV0aC9wcm9qZWN0cy9uZXV0cmlub3Mtb2F1dGgtY2xpZW50L3NyYy8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy91dGlsLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFLdEQsTUFBTSxPQUFPLFdBQVc7SUFJdEI7UUFDRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzdDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUN4QixDQUFDOzs7OztJQUtNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7Ozs7OztJQU1PLGNBQWM7UUFDcEIsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUNuSCxxQkFBcUI7WUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRyxzREFBc0Q7WUFDdEQsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FB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RTNELHNCQUFzQixHQUFHLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRO2dCQUM5RCxPQUFPLElBQUksR0FBRyxzQkFBc0IsQ0FBQzthQUN0QztpQkFBTTtnQkFDTCxPQUFPLElBQUksR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQzthQUMvQjtTQUNGO2FBQU07WUFDTCxPQUFPLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1NBQzdCO0lBRUgsQ0FBQzs7Ozs7O0lBTUQsV0FBVyxDQUFDLFFBQVE7UUFDbEIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7OztZQXhIRixVQUFVLFNBQUM7Z0JBQ1YsVUFBVSxFQUFFLE1BQU07YUFDbkI7Ozs7Ozs7Ozs7SUFFQyxtQ0FBNkI7Ozs7O0lBQzdCLGtDQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIGlzRGV2TW9kZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBVdGlsU2VydmljZSB7XG4gIHByaXZhdGUgcGxhdGZvcm1UeXBlOiBzdHJpbmc7XG4gIHByaXZhdGUgZW52aXJvbm1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wbGF0Zm9ybVR5cGUgPSB0aGlzLmNoZWNrUGxhdGZvcm1UeXBlKCk7XG4gICAgdGhpcy5nZXRFbnZpcm9ubWVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgJ21vYmlsZScgb3IgJ2Jyb3dzZXInIGJhc2VkIG9uIHRoZSBwbGF0Zm9ybVxuICAgKi9cbiAgcHVibGljIGdldFBsYXRmb3JtVHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnBsYXRmb3JtVHlwZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgZW52IGZyb20gbmV1dHJpbm9zIHNlZWQgYXBwXG4gICAqL1xuICBwcml2YXRlIGdldEVudmlyb25tZW50KCkge1xuICAgIGlmICh3aW5kb3dbJ25ldXRyaW5vcyddICYmIHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddICYmIHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddWydwcm9wZXJ0aWVzJ10pIHtcbiAgICAgIC8vIEJyZWFrIHRoZSByZWZlcm5jZVxuICAgICAgdGhpcy5lbnZpcm9ubWVudCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkod2luZG93WyduZXV0cmlub3MnXVsnZW52aXJvbm1lbnRzJ11bJ3Byb3BlcnRpZXMnXSkpO1xuICAgICAgLy8gQXBwZW5kIHRoZSB1cmwgd2l0aCAvIGlmIHNzZFVybCBkb2VzIG5vdCBlbmQgd2l0aCAvXG4gICAgICBpZiAodGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10pIHtcbiAgICAgICAgdGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10gPSB0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXS5lbmRzV2l0aCgnLycpID8gdGhpcy5lbnZpcm9ubWVudFsnc3NkVVJMJ10gOlxuICAgICAgICAgICh0aGlzLmVudmlyb25tZW50Wydzc2RVUkwnXSArICcvJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8qRm9yIGRldiBlbnYgb25seSAqL1xuICAgIHRoaXMuZW52aXJvbm1lbnQgPSB7XG4gICAgICBzc2RVUkw6ICdodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpLycsXG4gICAgICB1c2VEZWZhdWx0RXhjZXB0aW9uVUk6IHRydWUsXG4gICAgICBpc0lEU0VuYWJsZWQ6ICd0cnVlJyxcbiAgICAgIHdlYkFwcE1vdW50cG9pbnQ6ICcnLFxuICAgICAgcHJvZHVjdGlvbjogdHJ1ZVxuICAgIH07XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zICdtb2JpbGUnIG9yICdicm93c2VyJyBiYXNlZCBvbiB0aGUgcGxhdGZvcm1cbiAgICovXG4gIHByaXZhdGUgY2hlY2tQbGF0Zm9ybVR5cGUoKTogc3RyaW5nIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXN0cmluZy1saXRlcmFsXG4gICAgaWYgKHdpbmRvd1snZGV2aWNlJ10gJiYgKHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gIT09ICdicm93c2VyJyB8fCB3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddICE9PSAnQnJvd3NlcicpKSB7XG4gICAgICByZXR1cm4gJ21vYmlsZSc7XG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXN0cmluZy1saXRlcmFsXG4gICAgfSBlbHNlIGlmICh3aW5kb3dbJ2RldmljZSddICYmICh3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09PSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PT0gJ0Jyb3dzZXInKSkge1xuICAgICAgcmV0dXJuICdjb3Jkb3ZhX2Jyb3dzZXInO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2Jyb3dzZXInO1xuICAgIH1cbiAgfVxuXG4gIC8qVVJMIGhlbHBlciBtZXRob2RzICovXG4gIHB1YmxpYyBnZXRCYXNlTG9naW5QYXRoKCkge1xuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1sb2dpbmA7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2ViTG9naW5VcmwocmVkaXJlY3RUbykge1xuICAgIHJlZGlyZWN0VG8gPSB0aGlzLmNhbGNSZWRpcmVjdFVybChyZWRpcmVjdFRvKTtcbiAgICByZXR1cm4gYCR7dGhpcy5nZXRCYXNlTG9naW5QYXRoKCl9P3JlZGlyZWN0VG89JHtyZWRpcmVjdFRvfWA7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW9iaWxlTG9naW5VcmwoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuZ2V0QmFzZUxvZ2luUGF0aCgpfT9pc01vYmlsZT10cnVlYDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXZWJMb2dvdXRVcmwocmVkaXJlY3RUbykge1xuICAgIHJlZGlyZWN0VG8gPSB0aGlzLmNhbGNSZWRpcmVjdFVybChyZWRpcmVjdFRvKTtcbiAgICByZXR1cm4gYCR7dGhpcy5lbnZpcm9ubWVudC5zc2RVUkx9bG9nb3V0P3JlZGlyZWN0VG89JHtyZWRpcmVjdFRvfWA7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW9iaWxlTG9nb3V0VXJsKCkge1xuICAgIHJldHVybiBgJHt0aGlzLmVudmlyb25tZW50LnNzZFVSTH1sb2dvdXQ/aXNNb2JpbGU9dHJ1ZWA7XG4gIH1cblxuICBwdWJsaWMgZ2V0VXNlckluZm9VcmwoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMuZW52aXJvbm1lbnQuc3NkVVJMfXVzZXIvaW5mb2A7XG4gIH1cblxuICBnZXRTU0RCYXNlUGF0aCgpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5lbnZpcm9ubWVudC5zc2RVUkx9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhIGFic291bHRlIHVybCBmb3IgdGhlIHVybFBhdGhcbiAgICogQHBhcmFtIHVybFBhdGggLSBwYXRoIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IGhvc3RcbiAgICovXG4gIHByaXZhdGUgY2FsY1JlZGlyZWN0VXJsKHVybFBhdGgpIHtcbiAgICBpZiAodXJsUGF0aCkge1xuICAgICAgbGV0IGhvc3Q6IGFueSA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLm9yaWdpbjsgLy8gaHR0cDovL3h5ei5jb21cbiAgICAgIGlmICghaXNEZXZNb2RlKCkpIHtcbiAgICAgICAgLy8gQXBwZW5kIGB3ZWJBcHBNb3VudHBvaW50YCB0byBob3N0XG4gICAgICAgIGhvc3QgPSAodGhpcy5lbnZpcm9ubWVudC53ZWJBcHBNb3VudHBvaW50ICE9PSAnJyAmJiB0aGlzLmVudmlyb25tZW50LndlYkFwcE1vdW50cG9pbnQgIT09ICcvJylcbiAgICAgICAgICA/IG5ldyBVUkwodGhpcy5lbnZpcm9ubWVudC53ZWJBcHBNb3VudHBvaW50LCBob3N0KS5ocmVmIDogaG9zdDtcbiAgICAgICAgLy8gR2V0IHVzZXIgcmVkaXJlY3QgcGF0aCB3aXRoIGB3ZWJBcHBNb3VudHBvaW50YFxuICAgICAgICBjb25zdCBtb3VudFBvaW50V2l0aFJlZGlyZWN0ID0gbmV3IFVSTCh1cmxQYXRoLCBob3N0KS5wYXRobmFtZTtcbiAgICAgICAgcmV0dXJuIGhvc3QgKyBtb3VudFBvaW50V2l0aFJlZGlyZWN0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVUkwodXJsUGF0aCwgaG9zdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcHJvcGVydHkgLSBlbnZpcm9ubWVudCBwcm9wZXJ0eSBrZXlcbiAgICovXG4gIGdldEVudlZhbHVlKHByb3BlcnR5KTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5lbnZpcm9ubWVudFtwcm9wZXJ0eV07XG4gIH1cblxufVxuIl19